# aspproject3
9장
웹 폼 사용자 정의 컨트롤과 마스터 페이지
ASP.NET에서 특별히 사용하는 폴더
• App_Code: 웹 사이트에서 사용할 클래스 파일이 저장된다. 프로젝트 형식이 아닌 
웹 사이트 형식으로 생성된 프로젝트에서만 사용된다.
• App_GlobalResources: 웹 사이트 전체에서 사용되는 리소스 파일이 저장된다.
• App_LocalResources: 웹 페이지 각각에서 사용되는 리소스 파일이 저장된다.
• App_Data: 데이터베이스(MDF) 및 XML 같은 데이터 파일이 저장된다.
• App_Browsers: 각 브라우저와 관련된 정보를 저장한다. 현재는 거의 사용되지 않는다.
• 테마(Themes): ASP.NET 서버 컨트롤에 대한 스타일을 정의하는 파일이 저장된다. 
테마 폴더도 최근에는 부트스트랩 같은 UI 전용 라이브러리를 사용함에 따라서 거의 사용되지 않는다.
웹 프로젝트에 마우스 오른쪽 버튼 클릭 후 추가 > ASP.NET 폴더 추가


ASP.NET 웹 폼 사용자 정의 컨트롤
웹 폼 사용자 정의 컨트롤이란?
웹 폼 사용자 정의 컨트롤(User Control)은 웹 페이지에서 반복 사용되는 부분을 따로 파일로 구성해 사이트를 제작할 때 
효율성을 높여준다. 웹 폼 페이지가 ASPX 파일을 사용한다면 웹 사용자 정의 컨트롤 페이지는 ASCX 파일을 사용한다. 
웹 폼이 한 페이지 전체를 가리킨다면 웹 사용자 정의 컨트롤은 웹 폼에 올라갈 부분 페이지를 나타낸다. 
웹 사용자 정의 컨트롤은 단독으로 실행되지 않으며 반드시 웹 폼에서 실행되어야 한다.


ASP.NET 템플릿 페이지
ASP.NET 템플릿 페이지란 각각의 웹 폼에서 매번 공통적으로 들어가는 내비게이터, 카테고리, 카탈로그, 
카파라이트 등의 정보를 한 번만 작성하고, 각 페이지에 손쉽게 적용할 수 있는 방식
실습_ 웹 폼 사용자 정의 컨트롤을 사용한 웹 사이트 뼈대 만들기=========
DevUserControl
도구 > NuGet 패키지 관리자 > 패키지 관리자 콘솔을 선택해서 패키지 관리자 콘솔 창을 연다.
웹 폼			FrmUserControl.aspx
웹 폼 사용자 정의 컨트롤	NavigatorUserControl.ascx
웹 폼 사용자 정의 컨트롤	CategoryUserControl.ascx
웹 폼 사용자 정의 컨트롤	CatalogUserControl.ascx
웹 폼 사용자 정의 컨트롤	CopyrightUserControl.ascx


ASP.NET 마스터 페이지
마스터 페이지란?
마스터 페이지(Master Page)는 앞서 살펴본 사용자 정의 컨트롤을 사용한 템플릿 페이지와 같이 웹 페이지 전체에 
공통적으로 사용되는 뼈대를 구성할 때 사용하는 기능으로 ASP.NET 2.0부터 도입되었다.
 참고로 ASP.NET MVC에서는 레이아웃(Layout)으로 마스터 페이지 기능을 구현
최근 웹 사이트는 레이아웃을 똑같이 유지해 일관된 룩앤필(Look & Feel)을 제공한다. 
마스터 페이지는 반복적으로 사용되는 UI에 대한 템플릿을 제공하는 형태다. 
반복되는 HTML 작업을 피하고, 한 번 만들면 여러 번 재사용할 수 있는 레이아웃을 구성할 수 있다.

마스터 페이지의 처리 단계
 중첩된 마스터 페이지
마스터 페이지는 중첩해 사용할 수 있다. 중첩된 마스터 페이지는 디자인 보기에서는 사용할 수 없고 소스 보기에서만 작업할 수 있다.
실습_ 마스터 페이지를 사용한 웹 사이트 골격 구성하기
DevMasterPage
구 > NuGet 패키지 관리자 > 패키지 관리자 콘솔을 선택해서 패키지 관리자 콘솔 창을 열고 다음과 같이 입력 후 
엔터키를 눌러 프로젝트에 부트스트랩 관련 라이브러리를 추가
Install-Package Bootstrap
Site.Master
/Content/Site.css
==========================================


ASP.NET 테마와 스킨
• 테마란 컨트롤에 공통적으로 사용할 모양을 미리 정의하는 기능을 말한다.
• 테마란 *.skin에 서버 컨트롤의 스타일을 정의해 놓는다.
• 스킨(Skin)은 서버 컨트롤의 스타일을 미리 지정해 놓은 파일을 말한다.
웹 사이트에 테마를 적용하기 위한 단계
1. Theme 폴더 생성: 테마를 저장하기 위해서 웹 프로젝트에 App_Theme 폴더 생성 및 하위 폴더로 RedTheme와 같은 
테마 폴더를 생성한다.
~/App_Theme/RedTheme/
2. Skin 파일 생성: Theme 폴더에 Skin 파일을 하나 이상 생성한다.
RedTheme.skin
3. 테마 생성: 다음과 같이 각 컨트롤에 대한 스타일을 미리 정의한다.
<asp:TextBox runat="server" ForeColor="Blue" BackColor="Gray" />
4. 웹 폼의 Page 지시문에 Theme 속성을 지정한다.
Theme="RedTheme"

웹 사이트 전체에 테마 적용하기
만약 웹 사이트 전체에 테마를 적용하고자 할 때는 Page 지시문에 테마를 지정하지 않고 
Web.config 파일에 다음과 같이 테마를 지정한다.
<system.web>
  <!-- 모든 웹 폼에 일괄적으로 테마와 스킨 적용 -->
  <pages theme=“Red”></pages>
</system.web>

테마 적용 범위
테마의 적용 범위는 다음과 같다.
• Web Form의 Page 지시문에 Theme 속성 사용: 해당 페이지만 적용됨
• Web.config 파일의 <pages Theme="" /> 사용: 전체 웹 사이트 적용됨

특정 컨트롤에 테마 적용 방지
특정 컨트롤에 테마를 적용시키지 않으려면 EnableTheming="false"로 설정한다.
실습_ Theme를 사용한 일관적인 디자인 제공하기==========
DevTheme
 추가 > ASP.NET 폴더 추가 > 테마
App_Themes 폴더
Blue와 Red 폴더

ASP.NET 탐색 컨트롤
ASP.NET 탐색 컨트롤의 개요
탐색 컨트롤이란?
템플릿 이름		이름
SiteMapPath(사이트맵패스)	현재 페이지의 탐색 경로를 출력해주는 컨트롤
Menu(메뉴)		웹 페이지에 메뉴를 구현해주는 컨트롤
TreeView(트리뷰)		계층형 구조의 데이터를 표시해주는 컨트롤

사이트맵(Web.sitemap) 데이터 저장소
SiteMapPath, Menu, TreeView 컨트롤에서 공통적으로 사용하는 경로에 대한 데이터는 
웹 사이트 템플릿 페이지에서 추가되는 데이터 저장소인 Web.sitemap 파일을 통해서 정의할 수 있다. 

• 사이트맵 파일은 siteMap 루트 엘리먼트를 하나 가지고 있다.

• <siteMapNode> 엘리먼트는 메뉴 항목 하나를 나타낸다. 만약 
<siteMapNode> 엘리먼트의 하위에 또 다른 <siteMapNode> 엘리먼트가 오면 이는 하위 메뉴 항목으로 나타낸다.
실습_ 탐색 컨트롤을 학습할 웹 프로젝트 생성 및 사이트맵 생성=======
DevNavigationControl
사이트맵	Web.sitemap ---> xml파일이다
======================================

SiteMapPath 컨트롤
=========================================================================
주요 속성			설명
--------------------------------------------------------------------------------------------------------
ParentLevelsDisplayed	사이트 탐색 경로를 몇 단계까지 출력할지 설정. 기본값은 -1. 2로 설정하면 
			부모 경로를 2단계 상위까지만 표현
ShowToolTips		해당 링크에 마우스를 올렸을 때 툴팁을 보여줄지 설정
PathDirection		탐색 경로를 표현하는 순서를 결정. 부모에서 자식으로 또는 자식에서 부모로 표현
PathSeparator		Home > Board > Free와 같이 각 노드 간의 구분자
========================================================================
실습_ SiteMapPath 컨트롤로 사이트 위치 추적=======================
FrmSiteMapPath.aspx
===============================================

Menu 컨트롤
===================================
주요 속성		설명
----------------------------------------------------------------------------------------------------------------------
Items		메뉴의 각 항목을 만드는 컬렉션
DataSourceID	메뉴의 각 항목을 컬렉션 편집기를 사용하지 않고 Web.sitemap 또는 DB로부터 가져올 때 
		사용할 데이터 원본 개체를 지정
StaticDisplayLevels	상위 메뉴에 마우스를 올렸을 때 몇 단계 하위 메뉴까지 출력될지 결정
Orientation	메뉴의 출력 형태를 세로 또는 가로로 설정
===============================================
실습_ Menu 컨트롤을 사용한 사이트 내비게이션 구축하기
FrmMenu.aspx 
메뉴 컨트롤에 커서를 두고 Ctrl+.를 사용해서 스마트 태스크 창을 열면 메뉴 항목 편집 링크 메뉴를 클릭해서 각각의 메뉴를 편집
=================================================

TreeView 컨트롤
=============================================================
주요 속성			설명
---------------------------------------------------------------------------------------------------------
Nodes			트리뷰의 각 항목을 만드는 컬렉션
DataSourceID		트리뷰의 각 항목을 컬렉션 편집기를 사용하지 않고 Web.sitemap 또는 DB에서 가져오고자 할 때 
			사용할 데이터 원본 개체를 지정
ShowCheckBoxes		트리뷰 컨트롤의 각 항목 옆에 체크박스를 표시할지 설정
ShowLines		항목 간의 연결선을 표시할지 설정
ImageSet			트리뷰 컨트롤에 출력될 아이콘 이미지의 형태 결정
SelectedNodeChanged	트리뷰 컨트롤의 특정 항목을 선택할 때 발생
=======================================================================
실습_ TreeView 컨트롤을 사용해 사이트 탐색====================
FrmTreeView.aspx
===================================

ASP.NET 상태 관리
 ASP.NET 상태 관리 기법 소개
클라이언트 측 상태 관리 기법
1. Hidden Field
2. View State
3. Cookies
4. Control State
5. Query Strings

서버 측 상태 관리 기법
1. Session
2. Application
==============================================================
개체명			설명
-------------------------------------------------------------------------------------------------
HttpCookie(Cookies)	클라이언트 측 웹 브라우저에 간단한 데이터를 보관해 서버 성능을 향상시킬 수 있는 
			쿠키 개체를 생성한다.
Cache			서버 측 메모리에 데이터를 보관해 응답 속도를 향상시킬 수 있는 캐시 개체를 생성한다.
ViewState		해당 웹 페이지 내에서만 어떤 정보를 임시로 보관하고자 할 때 가장 최적화된 방법을 제공한다.
Application		전체 웹 사이트 내에서 공유되어야 할 항목을 저장하는 데 사용된다.
Session			전체 웹 사이트 내에서 현재 사용자에게만 제공되는 항목을 저장하는 데 사용된다.
QueryString		현재 페이지에서 다음 페이지로 간단한 정보를 전달할 때 사용한다.
------------------------------------------------------------------------------------------------------------------
실습_ ASP.NET 상태 관리를 위한 여러 가지 클래스 사용
DevStateManagement
FrmStateManagement.aspx
FrmStateShow.aspx

